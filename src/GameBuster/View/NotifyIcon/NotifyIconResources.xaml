<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:tb="http://www.hardcodet.net/taskbar"
                    xmlns:notifyIcon="clr-namespace:GameBuster.View.NotifyIcon">

    <!-- The taskbar context menu - the first row is a dummy to show off simple data binding -->
    <!--
        The "shared" directive is needed if we reopen the sample window a few times - WPF will otherwise
        reuse the same context menu (which is a resource) again (which will have its DataContext set to the old TaskbarIcon)
  -->
    <ContextMenu x:Shared="false" x:Key="SysTrayMenu">
        <MenuItem  Header="Settings..." Command="{Binding ShowWindowCommand}">
            <MenuItem.Icon>
                <!--Taken from Visual Studio 2015 Image Library -->
                <Viewbox Width="16" Height="16" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
                    <Rectangle Width="16" Height="16">
                        <Rectangle.Fill>
                            <DrawingBrush>
                                <DrawingBrush.Drawing>
                                    <DrawingGroup>
                                        <DrawingGroup.Children>
                                            <GeometryDrawing Brush="#FFF6F6F6" Geometry="F1M13,8.0005C13,10.7615 10.762,13.0005 8,13.0005 5.238,13.0005 3,10.7615 3,8.0005 3,5.2385 5.238,3.0005 8,3.0005 10.762,3.0005 13,5.2385 13,8.0005" />
                                            <GeometryDrawing Brush="#FF414141" Geometry="F1M8,6.0005C6.893,6.0005 6,6.8965 6,8.0005 6,9.1035 6.893,10.0005 8,10.0005 9.107,10.0005 10,9.1035 10,8.0005 10,6.8965 9.107,6.0005 8,6.0005 M10.714,8.6585C10.645,8.9435,10.531,9.2085,10.383,9.4535L11.15,10.4375C10.943,10.7055,10.705,10.9435,10.438,11.1505L9.453,10.3825C9.209,10.5315,8.943,10.6445,8.658,10.7145L8.504,11.9495C8.337,11.9705 8.173,12.0005 8,12.0005 7.827,12.0005 7.663,11.9705 7.496,11.9495L7.342,10.7145C7.057,10.6445,6.791,10.5315,6.547,10.3825L5.562,11.1505C5.295,10.9435,5.057,10.7055,4.85,10.4375L5.617,9.4535C5.469,9.2085,5.355,8.9435,5.286,8.6585L4.051,8.5045C4.029,8.3375 4,8.1735 4,8.0005 4,7.8275 4.029,7.6635 4.051,7.4965L5.286,7.3425C5.355,7.0575,5.469,6.7915,5.617,6.5475L4.85,5.5625C5.057,5.2955,5.295,5.0575,5.562,4.8505L6.547,5.6175C6.791,5.4695,7.057,5.3555,7.342,5.2865L7.496,4.0515C7.663,4.0295 7.827,4.0005 8,4.0005 8.173,4.0005 8.337,4.0295 8.504,4.0515L8.658,5.2865C8.943,5.3555,9.209,5.4695,9.453,5.6175L10.438,4.8505C10.705,5.0575,10.943,5.2955,11.15,5.5625L10.383,6.5475C10.531,6.7915,10.645,7.0575,10.714,7.3425L11.949,7.4965C11.971,7.6635 12,7.8275 12,8.0005 12,8.1735 11.971,8.3375 11.949,8.5045z" />
                                            <GeometryDrawing Brush="#FF414141" Geometry="F1M9,8.0005C9,8.5535 8.553,9.0005 8,9.0005 7.447,9.0005 7,8.5535 7,8.0005 7,7.4475 7.447,7.0005 8,7.0005 8.553,7.0005 9,7.4475 9,8.0005" />
                                            <GeometryDrawing Brush="#FFF0EFF1" Geometry="F1M8,9C7.447,9 7,8.553 7,8 7,7.448 7.447,7 8,7 8.553,7 9,7.448 9,8 9,8.553 8.553,9 8,9 M8,6C6.896,6 6,6.896 6,8 6,9.105 6.896,10 8,10 9.104,10 10,9.105 10,8 10,6.896 9.104,6 8,6" />
                                        </DrawingGroup.Children>
                                    </DrawingGroup>
                                </DrawingBrush.Drawing>
                            </DrawingBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                </Viewbox>
            </MenuItem.Icon>
        </MenuItem>
        <!--<MenuItem Header="Hide Window" Command="{Binding HideWindowCommand}" />
        <Separator />-->
        <MenuItem Header="Exit" Command="{Binding ExitApplicationCommand}" />
    </ContextMenu>

    <!-- the application's NotifyIcon - started from App.xaml.cs. Declares its own view model. -->
    <tb:TaskbarIcon x:Key="NotifyIcon"
                    IconSource="/View/NotifyIcon/Red.ico"
                    NoLeftClickDelay="True"
                    LeftClickCommand="{Binding ShowWindowCommand}"
                    ContextMenu="{StaticResource SysTrayMenu}">

        <!-- self-assign a data context (could also be done programmatically) -->
        <tb:TaskbarIcon.DataContext>
            <notifyIcon:NotifyIconViewModel />
        </tb:TaskbarIcon.DataContext>
        <tb:TaskbarIcon.TrayToolTip>
            <Border
              Background="White"
              BorderThickness="2"
              CornerRadius="4"
              Opacity="0.8"
              Width="240"
              Height="40">
                <TextBlock
                    Text="{Binding RemainingTime}"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                />
            </Border>
        </tb:TaskbarIcon.TrayToolTip>
    </tb:TaskbarIcon>

</ResourceDictionary>